(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{10:function(e,t,n){},11:function(e,t,n){"use strict";function a(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}n.r(t);var r=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,(n=[{key:"webgl",value:function(){try{var e=document.createElement("canvas");return!(!window.WebGLRenderingContext||!e.getContext("webgl")&&!e.getContext("experimental-webgl"))}catch(e){return!1}}},{key:"getWebGLErrorMessage",value:function(){var e=document.createElement("div");return e.id="webgl-error-message",e.style.fontFamily="monospace",e.style.fontSize="13px",e.style.fontWeight="normal",e.style.textAlign="center",e.style.background="#fff",e.style.color="#000",e.style.padding="1.5em",e.style.width="400px",e.style.margin="5em auto 0",e.innerHTML=window.WebGLRenderingContext?['Your graphics card does not seem to support <a href="http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation" style="color:#000000">WebGL</a>.<br />','Find out how to get it <a href="http://get.webgl.org/" style="color:#000000">here</a>.'].join("\n"):['Your browser does not seem to support <a href="http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation" style="color:#000000">WebGL</a>.<br/>','Find out how to get it <a href="http://get.webgl.org/" style="color:#000000">here</a>.'].join("\n"),e}},{key:"addGetWebGLMessage",value:function(e){var t,n,a;t=void 0!==(e=e||{}).parent?e.parent:document.body,n=void 0!==e.id?e.id:"oldie",(a=this.getWebGLErrorMessage()).id=n,t.appendChild(a)}}])&&a(t.prototype,n),r&&a(t,r),e}();function o(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var i=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._loading=t.getElementById("loading"),this._saveStyle()}var t,n,a;return t=e,(n=[{key:"_saveStyle",value:function(){this._old_style=this._loading.style.display}},{key:"hideLoading",value:function(){this._saveStyle(),this._loading.style.display="none"}},{key:"showLoading",value:function(){this._loading.style.display=this._old_style}}])&&o(t.prototype,n),a&&o(t,a),e}(),s=n(0),l=n(2);n(12);function c(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var u=function(){function e(t,n,a){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.scene=n,this.container=a,this.threeRenderer=new s.Vb({antialias:!0}),this.threeRenderer.setClearColor(n.fog.color),this.threeRenderer.setPixelRatio(window.devicePixelRatio),a.appendChild(this.threeRenderer.domElement),this.threeRenderer.shadowMap.enabled=!0,this.threeRenderer.shadowMap.type=s.jb,t.maxAnisotropy=this.threeRenderer.capabilities.getMaxAnisotropy(),this.updateSize(),this.threeRenderer.outputEncoding=s.Wb,this.threeRenderer.xr.enabled=!0,document.body.appendChild(l.a.createButton(this.threeRenderer)),document.addEventListener("DOMContentLoaded",(function(){return r.updateSize()}),!1),window.addEventListener("resize",(function(){return r.updateSize()}),!1)}var t,n,a;return t=e,(n=[{key:"updateSize",value:function(){this.threeRenderer.setSize(this.container.offsetWidth,this.container.offsetHeight)}},{key:"render",value:function(e,t){this.threeRenderer.render(e,t)}}])&&c(t.prototype,n),a&&c(t,a),e}();function h(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var d=function(){function e(t,n){var a=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var r=n.domElement.width,o=n.domElement.height;this.threeCamera=new s.kb(t.camera.fov,r/o,t.camera.near,t.camera.far),this.threeCamera.position.set(t.camera.posX,t.camera.posY,t.camera.posZ),this.threeCamera.lookAt(0,0,0),this.updateSize(n),window.addEventListener("resize",(function(){return a.updateSize(n)}),!1)}var t,n,a;return t=e,(n=[{key:"updateSize",value:function(e){this.threeCamera.aspect=e.domElement.width/e.domElement.height,this.threeCamera.updateProjectionMatrix()}}])&&h(t.prototype,n),a&&h(t,a),e}(),f=n(3);function v(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var m=function(){function e(t,n,a){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.threeControls=new f.a(n,a),this.init(t)}var t,n,a;return t=e,(n=[{key:"init",value:function(e){this.threeControls.target.set(e.controls.target.x,e.controls.target.y,e.controls.target.z),this.threeControls.autoRotate=e.controls.autoRotate,this.threeControls.autoRotateSpeed=e.controls.autoRotateSpeed,this.threeControls.rotateSpeed=e.controls.rotateSpeed,this.threeControls.zoomSpeed=e.controls.zoomSpeed,this.threeControls.minDistance=e.controls.minDistance,this.threeControls.maxDistance=e.controls.maxDistance,this.threeControls.minPolarAngle=e.controls.minPolarAngle,this.threeControls.maxPolarAngle=e.controls.maxPolarAngle,this.threeControls.enableDamping=e.controls.enableDamping,this.threeControls.enableZoom=e.controls.enableZoom,this.threeControls.dampingFactor=e.controls.dampingFactor,this.threeControls.keys={LEFT:0,RIGHT:0,UP:0,BOTTOM:0}}}])&&v(t.prototype,n),a&&v(t,a),e}(),y=n(4),p=n.n(y);function g(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return w(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return w(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var a=0,r=function(){};return{s:r,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){s=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(s)throw o}}}}function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function _(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var b=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,a;return t=e,(n=[{key:"generate",value:function(e,t,n,a){var r,o=[],i=(this._calcCenter(e),g(e));try{for(i.s();!(r=i.n()).done;){var s=r.value,l=this._generateShape(s.points,.01,a);o.push(l)}}catch(e){i.e(e)}finally{i.f()}var c,u=g(t);try{for(u.s();!(c=u.n()).done;){var h=c.value,d=this._generateShape(h,.01,a);o.push(d)}}catch(e){u.e(e)}finally{u.f()}return o}},{key:"_generateShape",value:function(e,t,n){console.log(e);var a,r=[],o=g(e);try{for(o.s();!(a=o.n()).done;){var i=a.value;r.push(new s.Rb(this._transform(i[0]),this._transform(i[1])))}}catch(e){o.e(e)}finally{o.f()}var l=new s.Ab(r),c={amount:t,bevelEnabled:!1},u=new s.u(l,c),h=new s.W(u,new s.Z({side:s.q}));return h.rotateX(Math.PI/2),h}},{key:"_calcCenter",value:function(e){var t,n=g(e);try{for(n.s();!(t=n.n()).done;){var a,r=g(t.value.points);try{for(r.s();!(a=r.n()).done;)a.value}catch(e){r.e(e)}finally{r.f()}}}catch(e){n.e(e)}finally{n.f()}}},{key:"generate2",value:function(e,t){var n=this._convertToVertices(e),a=new s.j,r=new Float32Array(n);a.setAttribute("position",new s.i(r,3));var o=new s.X({color:16711680,side:s.q}),i=new s.W(a,o);i.scale.set(.01,.01,.01);var l=this._moveToCenter(i);return[i,this._generateWallExtrude(l)]}},{key:"_generateWallExtrude",value:function(e){var t=[];t.push(new s.Rb(e.min.x,e.min.z)),t.push(new s.Rb(e.min.x,e.max.z)),t.push(new s.Rb(e.max.x,e.max.z)),t.push(new s.Rb(e.max.x,e.min.z));var n=new s.Ab(t),a=new s.u(n,{amount:-2.6,bevelEnabled:!1}),r=new s.W(a,new s.Z({side:s.q}));return r.rotateX(Math.PI/2),r.translateZ(-2),r}},{key:"_generateWall",value:function(){var e=new s.Ab(this._convertToVector(walls)),t=new s.u(e,{amount:-260}),n=new s.W(t,new s.Z({side:s.q}));n.rotateY(Math.PI/2),n.scale.set(.01,.01,.01),n.translateX(-cent.x),n.translateZ(-cent.z)}},{key:"_generatePlane",value:function(e,t){var n,a=[],r=g(t);try{for(r.s();!(n=r.n()).done;){var o=n.value;a.push(o[0]),a.push(o[1])}}catch(e){r.e(e)}finally{r.f()}var i,s=g(p()(a));try{for(s.s();!(i=s.n()).done;){var l=2*i.value,c=a[l],u=a[l+1];e.push(-u),e.push(0),e.push(c)}}catch(e){s.e(e)}finally{s.f()}}},{key:"_convertToVertices",value:function(e){var t,n=[],a=g(e);try{for(a.s();!(t=a.n()).done;){var r=t.value.points;this._generatePlane(n,r)}}catch(e){a.e(e)}finally{a.f()}return n}},{key:"_convertToVector",value:function(e){var t,n=[],a=5,r=g(e);try{for(r.s();!(t=r.n()).done;){var o=t.value;if(n.push(new s.Rb(o[0],o[1])),a++>8)break}}catch(e){r.e(e)}finally{r.f()}return console.log(n),n}},{key:"_moveToCenter",value:function(e){var t=(new s.g).setFromObject(e),n=t.getCenter(new s.Sb);return t.getSize(new s.Sb),console.log(t),console.log(n),e.translateX(-n.x),e.translateZ(-n.z),(new s.g).setFromObject(e)}},{key:"_transform",value:function(e){return e/100}}])&&_(t.prototype,n),a&&_(t,a),e}();function k(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return A(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return A(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var a=0,r=function(){};return{s:r,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){s=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(s)throw o}}}}function A(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function x(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var C=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),s.k.enabled=!0,this._loadTexture(t,n)}var t,n,a;return t=e,(n=[{key:"_generateFlat",value:function(e,t){return(new b).generate(e.rooms,e.doors,e.external_walls,t)}},{key:"_sceneImporter",value:function(e,t,n){var a,r=k(n);try{for(r.s();!(a=r.n()).done;){var o=a.value;o.scale.set(e.size.x,e.size.y,e.size.z),o.translateX(e.translate.x),o.translateY(e.translate.y),o.translateZ(e.translate.z),t.add(o)}}catch(e){r.e(e)}finally{r.f()}}},{key:"_loadJSON",value:function(e,t,n,a,r){var o=new s.v,i=this;o.load(e,(function(e){var o=i._generateFlat(JSON.parse(e.replaceAll("'",'"')),r);t(n,a,o)}),(function(e){console.log(e.loaded/e.total*100+"% loaded")}),(function(e){console.error("An error happened")}))}},{key:"_loadTexture",value:function(e,t){var n=this;(new s.Lb).load("assets/textures/floor_tiles_06_diff_1k.png ",(function(a){n._material=new s.X({map:a,side:s.q}),n._loadJSON(e.url,n._sceneImporter,e,t,n._material)}),void 0,(function(e){console.error("An error happened.")}))}}])&&x(t.prototype,n),a&&x(t,a),e}();function S(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var z=function(){function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.keys={};var n=new Map,a=function(e,a){t.keys[a]={down:!1,justPressed:!1},n.set(e,a)},r=function(e,a){var r=n.get(e);r&&function(e,n){var a=t.keys[e];a.justPressed=n&&!a.down,a.down=n}(r,a)};a(65,"left"),a(68,"right"),a(87,"up"),a(83,"down"),a(69,"action"),a(32,"action2"),window.addEventListener("keydown",(function(e){r(e.keyCode,!0)})),window.addEventListener("keyup",(function(e){r(e.keyCode,!1)}))}var t,n,a;return t=e,(n=[{key:"update",value:function(){for(var e=0,t=Object.values(this.keys);e<t.length;e++){var n=t[e];n.justPressed&&(n.justPressed=!1)}}}])&&S(t.prototype,n),a&&S(t,a),e}();function P(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var j=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._moveSpeed=5e-4,this._turnSpeed=4,this._avatar=t.scene,this._kForward=n,this._walk=!1;var a=new s.c(this._avatar);this._mixer=a,this._animations=this._getAnimations(this._mixer,t),this._fade_duration=.4,this._action=!1,this._action2=!1}var t,n,a;return t=e,(n=[{key:"update",value:function(e,t){this._moveSpeed;var n=this._avatar,a=this._fade_duration,r=(t.keys.up.down?1:0)+(t.keys.down.down?-1:0),o=(t.keys.left.down?1:0)+(t.keys.right.down?-1:0);0!==o&&n.rotateY(this._turnSpeed*o*e),0!==r?(n.translateOnAxis(this._kForward,r*e),this._walk||(this._startAnimation("walk",a),this._walk=!0)):this._walk&&(this._stopAnimation("walk",a),this._walk=!1),t.keys.action.down?!0!==this._action&&(this._startAnimation("pointing",a),this._action=!0):!0===this._action&&(this._stopAnimation("pointing",a),this._action=!1),t.keys.action2.down?!0!==this._action2&&(this._startAnimation("gesture",a),this._action2=!0):!0===this._action2&&(this._stopAnimation("gesture",a),this._action2=!1),this._mixer.update(e)}},{key:"_getAnimations",value:function(e,t){var n=t.animations,a=e.clipAction(n[6]),r=e.clipAction(n[0]),o=e.clipAction(n[8]),i=e.clipAction(n[4]),s=e.clipAction(n[10]),l=e.clipAction(n[12]),c=[];return c.pointing=a,c.gesture=r,c.startWalk=o,c.endWalk=i,c.walk=s,c.idle=l,c}},{key:"_startAnimation",value:function(e,t){this._animations[e].reset().setEffectiveTimeScale(1).setEffectiveWeight(1).fadeIn(t).play()}},{key:"_stopAnimation",value:function(e,t){this._animations[e].fadeOut(t)}}])&&P(t.prototype,n),a&&P(t,a),e}(),E=(n(9),n(1)),O=n(7),M=n(5),W=n(6);function R(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return T(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return T(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var a=0,r=function(){};return{s:r,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){s=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(s)throw o}}}}function T(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function L(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function I(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var F=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};L(this,e),this._container=t,this._config=Object.assign({fog:{color:5263440,near:8e-4},camera:{fov:60,near:.001,far:1e3,aspect:1,posX:0,posY:1.8,posZ:10.2},controls:{autoRotate:!1,autoRotateSpeed:-.5,rotateSpeed:.5,zoomSpeed:.8,minDistance:.01,maxDistance:600,minPolarAngle:Math.PI/5,maxPolarAngle:Math.PI/2,minAzimuthAngle:-1/0,maxAzimuthAngle:1/0,enableDamping:!0,dampingFactor:.5,enableZoom:!0,target:{x:0,y:1.8,z:0}},scene:[{url:"assets/interior/generated/test.json",size:{x:1,y:1,z:1},translate:{x:0,y:0,z:0},animated:!1},{url:"assets/claudia/mixamo-1613450024492.glb",size:{x:.01,y:.01,z:.01},translate1:{x:-6,y:-.55,z:6.5},translate:{x:3,y:-.05,z:3.6},avatar:!0,animated:!1,animatedCycle:[{animation:"idle",time:2},{animation:"pointing"},{speed:.2,time:20,animation:"walk"},{animation:"gesture"}]}],isDev:!0},n),this._config.isDev&&console.log(this._config)}var t,n,a;return t=e,(n=[{key:"start",value:function(){var e=this._config;this._scene=this.createScene(e);var t=this._scene;this._renderer=new u(e,t,this._container),this._camera=new d(e,this._renderer.threeRenderer),this._controls=new m(e,this._camera.threeCamera,this._container);var n=new s.a(4210752,3);t.add(n);var a,r=R(e.scene);try{for(r.s();!(a=r.n()).done;){var o=a.value;this.loadScene(o,t)}}catch(e){r.e(e)}finally{r.f()}this._inputManager=new z,this._avatarManager=void 0}},{key:"run",value:function(){this.render()}},{key:"createScene",value:function(e){var t=new s.yb;return window.devicePixelRatio&&(e.dpr=window.devicePixelRatio),t.fog=new s.x(e.fog.color,e.fog.near),t}},{key:"render",value:function(){this._renderer.render(this._scene,this._camera.threeCamera),this._controls.threeControls.update();var e=(Date.now()-this._lastframe)/1e3;if(void 0!==this._animatedCycle){var t=this._animatedCycle[this._animatedCyclePos],n=t.time;void 0===n&&(n=this._getDuration());var a=1e3*n,r=Date.now();if(void 0!==t.speed){var o=e*t.speed;this._action_figure.translateZ(o)}r-this._lastAnimationPhase>a&&(this._getAnimation().fadeOut(.4),this._animatedCyclePos=this._animatedCyclePos+1,this._animatedCyclePos>this._animatedCycle.length-1&&(this._animatedCyclePos=0),this._lastAnimationPhase=r,this._getAnimation().reset().setEffectiveTimeScale(1).setEffectiveWeight(1).fadeIn(.4).play(),console.log(this._animatedCyclePos))}void 0!==this._mixer&&this._mixer.update(e),this._lastframe=Date.now(),this._inputManager.update(),void 0!==this._avatarManager&&this._avatarManager.update(e,this._inputManager),requestAnimationFrame(this.render.bind(this))}},{key:"loadScene",value:function(e,t){var n=e.url.toLowerCase();n.endsWith("json")?new C(e,t):n.endsWith("gltf")||n.endsWith("glb")?this._loadGLTF(e,t):n.endsWith("fbx")?this._loadFBX(e,t):n.endsWith("vrm")?this._loadVRM(e,t):n.endsWith("bvh")?this._loadBVH(e,t):console.log("Unknown format! "+n)}},{key:"_loadBVH",value:function(e,t){var n=this;(new M.a).load(e.scene.url,(function(a){console.log(a);var r=new s.Cb(a.skeleton.bones[0]);r.skeleton=a.skeleton;var o=new s.A;o.add(a.skeleton.bones[0]),t.add(n._resizeObject(e.scene.size,r)),t.add(n._resizeObject(e.scene.size,o));var i=new s.c(r);i.clipAction(a.clip).setEffectiveWeight(1).play(),n._setMixer(i)}))}},{key:"_loadVRM",value:function(e,t){(new E.a).load(e.scene.url,(function(e){W.a.from(e).then((function(e){console.log(e.meta),t.add(e.scene),console.log(e)}))}),(function(e){return console.log("Loading model...",e.loaded/e.total*100,"%")}),(function(e){return console.error(e)}))}},{key:"_fixObject",value:function(e,t){return t.translateX(e.x),t.translateY(e.y),t.translateZ(e.z),t}},{key:"_resizeObject",value:function(e,t){var n=(new s.g).setFromObject(t).getSize(new s.Sb);return Math.max(n.x,n.y,n.z),Math.max(e.x,e.y,e.z),t.scale.set(e.x,e.y,e.z),t}},{key:"_loadFBX",value:function(e,t){var n=new O.a,a=this;n.load(e.scene.url,(function(n){var r=new s.Cb(n);r.visible=!0,t.add(r);var o=new s.c(n);console.log(n.animations),o.clipAction(n.animations[0]).play(),n.traverse((function(e){e.isMesh&&(e.castShadow=!0,e.receiveShadow=!0)})),t.add(a._resizeObject(e.scene.size,n)),a._setMixer(o)}))}},{key:"_loadGLTF",value:function(e,t){var n=new E.a,a=this._processScene,r=(this._searchAnimations,this);n.load(e.url,(function(n){var o=a(n.scene);if(e.avatar&&(r._avatarManager=new j(n,new s.Sb(0,0,1))),e.animated){var i=new s.Cb(o);i.visible=!1,t.add(i);var l=new s.c(n.scene);r._mixer=l,r.bones=[];var c=n.animations;console.log(c);var u=l.clipAction(c[6]),h=l.clipAction(c[0]),d=l.clipAction(c[8]),f=l.clipAction(c[4]),v=l.clipAction(c[10]),m=l.clipAction(c[12]);r.durations=[],r.durations.pointing=c[6].duration,r.durations.gesture=c[0].duration,r.durations.walk=c[10].duration,r.durations.startWalk=c[8].duration,r.durations.endWalk=c[4].duration,r.durations.idle=c[12].duration,r.animations=[],r.animations.pointing=u,r.animations.gesture=h,r.animations.startWalk=d,r.animations.endWalk=f,r.animations.walk=v,r.animations.idle=m;var y=e.animatedCycle;void 0!==y&&(r._lastAnimationPhase=Date.now(),r._animatedCycle=y,r._animatedCyclePos=0,r.animations[y[r._animatedCyclePos].animation].play())}r._action_figure=r._fixObject(e.translate,r._resizeObject(e.size,o)),t.add(r._action_figure)}),void 0,(function(e){console.error(e)}))}},{key:"_searchAnimations",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._searchAnimations;void 0!==e&&void 0!==e.children&&e.children.forEach((function(e){var n=e.animations;void 0!==n&&console.log(n),t(e,t)}))}},{key:"_processScene",value:function(e){var t=e,n=(new s.g).setFromObject(t),a=n.getCenter(new s.Sb),r=n.getSize(new s.Sb),o=Math.max(r.x,r.y,r.z);return t.scale.multiplyScalar(1.8/o),n.setFromObject(t),n.getCenter(a),n.getSize(r),t.position.copy(a).multiplyScalar(-1),t.position.y+=.5*r.y,e}},{key:"_setMixer",value:function(e){this._mixer=e}},{key:"_getAnimation",value:function(){return this.animations[this._getAnimationName()]}},{key:"_getDuration",value:function(){return this.durations[this._getAnimationName()]}},{key:"_getAnimationName",value:function(){return this._animatedCycle[this._animatedCyclePos].animation}}])&&I(t.prototype,n),a&&I(t,a),e}();n(10);console.log("Start sequor.edu");var D=new r,G=new i(document);if(D.webgl()){var Z=new F(document.getElementById("appContainer"));Z.start(),G.hideLoading(),Z.run()}else G.hideLoading(),D.addGetWebGLMessage({parent:document.getElementById("appContainer"),id:"webgl-error"})},8:function(e,t,n){e.exports=n(11)}},[[8,1,2]]]);